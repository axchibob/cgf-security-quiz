<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CGF Security Knowledge Assessment</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üõ°Ô∏è CGF Security Knowledge Assessment</h1>
            <p>Test your security knowledge across 4 key categories</p>
        </header>

        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <div class="welcome-card">
                <h2>Welcome to the Assessment</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <span class="icon">üìù</span>
                        <h3>16 Questions</h3>
                        <p>4 questions from each category</p>
                    </div>
                    <div class="info-item">
                        <span class="icon">üîÄ</span>
                        <h3>Randomized</h3>
                        <p>Different questions each time</p>
                    </div>
                    <div class="info-item">
                        <span class="icon">üìä</span>
                        <h3>Category Analysis</h3>
                        <p>See performance by topic</p>
                    </div>
                    <div class="info-item">
                        <span class="icon">‚è±Ô∏è</span>
                        <h3>Timed</h3>
                        <p>Track your completion time</p>
                    </div>
                </div>
                
                <div class="user-input">
                    <input type="text" id="userName" placeholder="Enter your name" required>
                    <input type="email" id="userEmail" placeholder="Enter your email (optional)">
                    <button id="startQuiz" class="btn-primary">Start Assessment</button>
                </div>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="screen">
            <div class="quiz-header">
                <div class="progress-info">
                    <span>Question <span id="currentQ">1</span> of <span id="totalQ">16</span></span>
                    <span>Category: <span id="currentCategory">Physical Security</span></span>
                </div>
                <div class="timer">Time: <span id="timer">00:00</span></div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="question-card">
                <h3 id="questionText">Question will appear here</h3>
                <div class="options" id="optionsContainer">
                    <!-- Options will be generated here -->
                </div>
            </div>

            <div class="quiz-navigation">
                <button id="prevBtn" class="btn-secondary" disabled>Previous</button>
                <button id="nextBtn" class="btn-primary" disabled>Next</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="results-card">
                <h2>üéâ Assessment Complete!</h2>
                <div class="score-summary">
                    <div class="overall-score">
                        <span class="score-number" id="overallScore">0%</span>
                        <span class="score-label">Overall Score</span>
                    </div>
                </div>

                <div class="category-results" id="categoryResults">
                    <!-- Category breakdown will appear here -->
                </div>

                <div class="action-buttons">
                    <button id="retakeBtn" class="btn-secondary">Take Again</button>
                    <button id="exportBtn" class="btn-primary">Export Results</button>
                    <button id="viewAllResults" class="btn-primary">View All Results</button>
                </div>
            </div>
        </div>

        <!-- Admin Screen -->
        <div id="admin-screen" class="screen">
            <div class="admin-panel">
                <div class="admin-header">
                    <h2>‚öôÔ∏è Admin Dashboard</h2>
                    <button id="closeAdmin" class="btn-secondary">‚Üê Back to Quiz</button>
                </div>
                
                <div class="admin-tabs">
                    <button class="tab-btn active" data-tab="overview">Overview</button>
                    <button class="tab-btn" data-tab="questions">Questions</button>
                    <button class="tab-btn" data-tab="results">All Results</button>
                    <button class="tab-btn" data-tab="analytics">Analytics</button>
                    <button class="tab-btn" data-tab="shared">Shared Results</button>
                </div>
                
                <!-- Overview Tab -->
                <div class="tab-content active" id="overview-tab">
                    <h3>üìä Quick Stats</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalUsers">0</div>
                            <div class="stat-label">Total Users</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalAttempts">0</div>
                            <div class="stat-label">Total Attempts</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="avgScore">0%</div>
                            <div class="stat-label">Average Score</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="passRate">0%</div>
                            <div class="stat-label">Pass Rate</div>
                        </div>
                    </div>
                    
                    <div class="recent-activity">
                        <h4>Recent Activity</h4>
                        <div id="recentResults"></div>
                    </div>
                </div>
                
                <!-- Questions Tab -->
                <div class="tab-content" id="questions-tab">
                    <div class="tab-header">
                        <h3>üìù Question Bank</h3>
                        <button id="addQuestionBtn" class="btn-primary">+ Add Question</button>
                    </div>
                    <div id="questionsList"></div>
                </div>
                
                <!-- Results Tab -->
                <div class="tab-content" id="results-tab">
                    <div class="tab-header">
                        <h3>üìã Local Results</h3>
                        <div class="admin-actions">
                            <button id="exportAllBtn" class="btn-primary">üì• Export All</button>
                            <button id="clearAllBtn" class="btn-secondary">üóëÔ∏è Clear All</button>
                        </div>
                    </div>
                    <div id="allResultsList"></div>
                </div>
                
                <!-- Analytics Tab -->
                <div class="tab-content" id="analytics-tab">
                    <h3>üìà Detailed Analytics</h3>
                    <div id="analyticsContent"></div>
                </div>

                <!-- Shared Results Tab -->
                <div class="tab-content" id="shared-tab">
                    <div class="tab-header">
                        <h3>üåê Shared Results Database</h3>
                        <div class="admin-actions">
                            <button id="refreshSharedBtn" class="btn-primary">üîÑ Refresh</button>
                            <button id="exportSharedBtn" class="btn-primary">üì• Export Shared</button>
                            <button id="syncResultsBtn" class="btn-secondary">üì§ Sync Local to Shared</button>
                        </div>
                    </div>
                    <div class="shared-info">
                        <p><strong>Shared Database URL:</strong> <span id="sharedDbUrl">Not configured</span></p>
                        <p><strong>Last Sync:</strong> <span id="lastSync">Never</span></p>
                        <p><strong>Total Shared Results:</strong> <span id="sharedCount">0</span></p>
                    </div>
                    <div id="sharedResultsList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Admin Access -->
    <div class="admin-access">
        <button id="adminToggle" class="admin-btn" title="Admin Dashboard">
            <span class="admin-icon">‚öôÔ∏è</span>
            <span class="admin-text">Admin</span>
        </button>
    </div>

    <!-- Add Question Modal -->
    <div id="addQuestionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Question</h3>
                <button id="closeModal" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addQuestionForm">
                    <div class="form-group">
                        <label>Category:</label>
                        <select id="questionCategory" required>
                            <option value="Physical Security">Physical Security</option>
                            <option value="Access Control">Access Control</option>
                            <option value="Data Protection">Data Protection</option>
                            <option value="Incident Response">Incident Response</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Question:</label>
                        <textarea id="questionText" required placeholder="Enter your question here..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Option A:</label>
                        <input type="text" id="optionA" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Option B:</label>
                        <input type="text" id="optionB" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Option C:</label>
                        <input type="text" id="optionC" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Option D:</label>
                        <input type="text" id="optionD" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Correct Answer:</label>
                        <select id="correctAnswer" required>
                            <option value="0">Option A</option>
                            <option value="1">Option B</option>
                            <option value="2">Option C</option>
                            <option value="3">Option D</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Explanation:</label>
                        <textarea id="explanation" placeholder="Explain why this is the correct answer..."></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn-primary">Add Question</button>
                        <button type="button" id="cancelAdd" class="btn-secondary">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Shared Database Config Modal -->
    <div id="configModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Configure Shared Database</h3>
                <button id="closeConfigModal" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="config-options">
                    <h4>Choose Your Sharing Method:</h4>
                    
                    <div class="config-option" data-method="github">
                        <h5>üìÅ GitHub Gist (Recommended)</h5>
                        <p>Store results in a GitHub Gist for easy sharing</p>
                        <button class="btn-primary">Setup GitHub Gist</button>
                    </div>
                    
                    <div class="config-option" data-method="firebase">
                        <h5>üî• Firebase Database</h5>
                        <p>Real-time database for instant result sharing</p>
                        <button class="btn-primary">Setup Firebase</button>
                    </div>
                    
                    <div class="config-option" data-method="json">
                        <h5>üìÑ JSON File Sharing</h5>
                        <p>Simple file-based sharing via URL</p>
                        <button class="btn-primary">Setup JSON Sharing</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/questions.js"></script>
    <script src="js/shared-results.js"></script>
    <script src="js/quiz.js"></script>
</body>
</html>
